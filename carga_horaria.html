<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Carga Horária</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'> -->

    <!-- 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>  
    -->

    <style>
        * {
            cursor: pointer;
            /* font-family: Arial, Helvetica, sans-serif; */
            /* font-family: 'Open Sans'; */
        }
        table td,
        table td * {
            vertical-align: top;
        }
    </style>
    <script type="text/javascript">
        const SEPARADOR = ",";
        var cargaHorariaPorProfessor = [];
        var vetDisciplina = [];

        function converter(minutos) {
            const horas = parseInt(minutos / 60);
            const min = parseInt(minutos % 60);
            const textoHoras = (`00${horas}`).slice(-2);
            const textoMinutos = (`00${min}`).slice(-2);
            return `${textoHoras}:${textoMinutos}`;
        }

        function apagar() {
            localStorage.clear();
            alert("Histórico Removido");
        }

        function visualizarProfessor(professor) {
            var conteudo = "Professor(a):" + professor + "\n";
            var qtde = 0;
            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined /*&& vetDisciplina[index].professor != undefined*/) {
                    if (vetDisciplina[index].professor.trim() == professor.trim()) {
                        qtde++;
                        conteudo += "*"+vetDisciplina[index].nome+"\n";
                    }
                }
            }
            // if (qtde > 0) {
            alert(conteudo + "Turmas:" + qtde + "\nCarga:" + converter(cargaHorariaPorProfessor[professor]));
            // } else {
            // alert(conteudo);
            // }
        }

        function restaurar() {
            var html = "";
            var total = 0;
            if (localStorage.getItem("cargaHorariaPorProfessor") != undefined && localStorage.getItem("vetDisciplina") != undefined) {
                var cargaHorariaPorProfessorAux = JSON.parse(localStorage.getItem("cargaHorariaPorProfessor"));
                cargaHorariaPorProfessor = [];
                for (let index = 0; index < cargaHorariaPorProfessorAux.length; index++) {
                    cargaHorariaPorProfessor[cargaHorariaPorProfessorAux[index].nome] = parseInt(cargaHorariaPorProfessorAux[index].carga);
                }
                // html = "<input type='text' id='novo_professor'><button onclick='adicionarNovoProfessor()'>Adicionar</button><br>";
                html = "<h2> Novo Professor </h2> Nome: <input type='text' id='novo_professor'><br><button onclick='adicionarNovoProfessor()'>Adicionar</button><br>";
                html += "<table id='tab_carga' border='1'>";
                for (var professor in cargaHorariaPorProfessor) {
                    total = cargaHorariaPorProfessor[professor];
                    html += "<tr> <td id=\"linha_" + professor + "\"> <button onclick=\"editarProfessor('" + professor.trim() + "')\"> editar  </button> <button onclick=\"visualizarProfessor('" + professor.trim() + "')\"> visualizar  </button> <button onclick=\"removerProfessor('" + professor.trim() + "')\"> remover  </button> " + professor + "</td><td>" + converter(total) + "</td>";
                    qtde = 0;
                    for (let index = 0; index < JSON.parse(localStorage.getItem("vetDisciplina")).length; index++) {
                        if (JSON.parse(localStorage.getItem("vetDisciplina"))[index] != undefined) {
                            if (JSON.parse(localStorage.getItem("vetDisciplina"))[index].professor == professor) {
                                qtde++;
                            }
                        }
                    }
                    html += "<td>" + qtde + "</td>";
                    html += "</tr>";
                }
                html += "</table><button onclick='exportar()'> Exportar CSV </button>";
                // html += "</table><button onclick='salvar()'> Salvar (localStorage) </button>";
                // html += "</table><button onclick='restaurar()'> Restaurar (localStorage) </button>";
                // html += "</table><button onclick='apagar()'> Apagar (localStorage) </button>";
                document.getElementById("tabela").innerHTML = "";
                document.getElementById("tabela").innerHTML = html;

                vetDisciplina = [];
                for (let index = 0; index < JSON.parse(localStorage.getItem("vetDisciplina")).length; index++) {
                    if (JSON.parse(localStorage.getItem("vetDisciplina"))[index] != undefined) {
                        let disciplina = {
                            "nome": JSON.parse(localStorage.getItem("vetDisciplina"))[index].nome,
                            "creditos": parseInt(JSON.parse(localStorage.getItem("vetDisciplina"))[index].creditos),
                            "duracaoPorCredito": parseInt(JSON.parse(localStorage.getItem("vetDisciplina"))[index].duracaoPorCredito),
                            "professor": JSON.parse(localStorage.getItem("vetDisciplina"))[index].professor
                        }
                        vetDisciplina.push(disciplina);
                    }
                }
                html = "";
                // html = "<input type='text' id='novo_nome'><input type='number' id='novo_creditos'><input type='number' id='novo_duracao'><button onclick='adicionarNovaDisciplina()'>Adicionar</button><br>";
                html = "<h2> Nova Disciplina </h2>Nome:<input type='text' id='novo_nome'><br>Quantidade de Créditos:<input type='number' id='novo_creditos' min='0' max='10'><br>Tempo (em minutos) por cada crédito:<input type='number' id='novo_duracao' value='50'><br><button onclick='adicionarNovaDisciplina()'>Adicionar</button><br>";
                html += "<table id='delegacao' border='1'>";
                var html_professor = "";
                for (let index = 0; index < vetDisciplina.length; index++) {
                    if (vetDisciplina[index] != undefined) {
                        html_professor = "";
                        html_professor = "<select id='" + index + "' onchange='computa()'>";
                        html_professor += "<option value=''> </option>";
                        for (var professor in cargaHorariaPorProfessor) {
                            html_professor += "<option value='" + professor + "' " + ((professor == vetDisciplina[index].professor) ? "selected" : "") + ">" + professor + "</option>";
                        }
                        html_professor += "</select>";
                        html += "<tr id=\"linha_" + index + "\"> <td> <button onclick=\"removerDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> excluir </button> <button onclick=\"editarDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> editar  </button> <button onclick=\"visualizarDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> visualizar  </button>" + vetDisciplina[index].nome + "</td><td>" + html_professor + "</td></tr>";
                    }
                }
                html += "</table>";
                document.getElementById("sistema").innerHTML = "";
                document.getElementById("sistema").innerHTML = html;
                document.getElementById("formato_professor").style = "display: none;";
                document.getElementById("formato_disciplina").style = "display: none;";
                document.getElementById("vetProfessor").style = "display: none;";
                document.getElementById("vetDisciplina").style = "display: none;";
                document.getElementById("btn_carregar").style = "display: none;";
                document.getElementById("btn_apagar").style = "display: none;";
                document.getElementById("btn_restaurar").style = "display: none;";
            } else {
                alert("Não há histórico salvo");
            }
        }

        function salvar() {
            var vetDisciplinaAux = [];
            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined && document.getElementById(index) != undefined) {
                    let disciplina = {
                        "nome": vetDisciplina[index].nome,
                        "creditos": vetDisciplina[index].creditos,
                        "duracaoPorCredito": vetDisciplina[index].duracaoPorCredito,
                        "professor": ((document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() != '') ? document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() : "PENDENTE")
                    }
                    vetDisciplinaAux.push(disciplina);
                }
            }
            localStorage.setItem("vetDisciplina", JSON.stringify(vetDisciplinaAux));

            var cargaHorariaPorProfessorAux = [];
            for (var professor_nome in cargaHorariaPorProfessor) {
                let professor = {
                    "nome": professor_nome,
                    "carga": cargaHorariaPorProfessor[professor_nome]
                }
                cargaHorariaPorProfessorAux.push(professor);
            }
            localStorage.setItem("cargaHorariaPorProfessor", JSON.stringify(cargaHorariaPorProfessorAux));
        }

        function exportar() {
            var wnd = window.open("about:blank", "", "_blank");
            var csv = "nome;creditos;duracaoPorCredito;professor;<br>";
            var qtde = 0;
            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined) {
                    csv += vetDisciplina[index].nome + ";" + vetDisciplina[index].creditos + ";" + vetDisciplina[index].duracaoPorCredito + ";" + ((document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() != '') ? document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() : "PENDENTE") + ";<br>";
                }
            }
            csv +="professor;carga;turmas;<br>";
            for (var professor in cargaHorariaPorProfessor) {
                qtde = 0;
                for (let index = 0; index < vetDisciplina.length; index++) {
                    if (vetDisciplina[index] != undefined) {
                        if (document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() == professor) {
                            qtde++;
                        }
                    }
                }
                csv += professor + ";" + converter(cargaHorariaPorProfessor[professor]) + ";" + qtde + ";<br>";
            }
            wnd.document.write(csv);
            computa();
        }

        function naoExisteProfessor(nome) {
            if (nome != "") {
                for (var professor in cargaHorariaPorProfessor) {
                    if (professor == nome) {
                        return false;
                    }
                }
                return true;
            }
            return false;
        }



        function adicionarNovoProfessor() {
            if (document.getElementById('novo_professor').value != "" && naoExisteProfessor(document.getElementById('novo_professor').value)) {
                var novo_professor = document.getElementById('novo_professor').value;
                cargaHorariaPorProfessor[novo_professor] = 0;
                var table = document.getElementById('tab_carga');
                var row = table.insertRow(0);

                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);

                cell1.innerHTML = "<button onclick=\"editarProfessor('" + novo_professor.trim() + "')\"> editar  </button> <button onclick=\"visualizarProfessor('" + novo_professor.trim() + "')\"> visualizar  </button>  <button onclick=\"removerProfessor('" + novo_professor.trim() + "')\"> remover  </button> " + novo_professor;
                cell2.innerHTML = 0;
                cell3.innerHTML = 0;

                var vetCombo = document.querySelectorAll("select");
                for (let index = 0; index < vetCombo.length; index++) {
                    var select = vetCombo[index];
                    var opt = document.createElement('option');
                    opt.value = novo_professor;
                    opt.innerHTML = novo_professor;
                    select.appendChild(opt);
                }
                document.getElementById('novo_professor').value = "";
                // salvar();
                // atualizarCargaPorProfessor();
                computa();
            } else {
                alert('nome não pode ser em branco e deve ser único');
            }

        }

        function atualizarCargaPorProfessor() {
            var html = "<h2> Novo Professor </h2> Nome: <input type='text' id='novo_professor'><br><button onclick='adicionarNovoProfessor()'>Adicionar</button><br><br>";
            var qtde = 0;
            html += "<table id='tab_carga' border='1'>";
            for (var professor in cargaHorariaPorProfessor) {
                var total = cargaHorariaPorProfessor[professor];
                html += "<tr> <td id=\"linha_" + professor + "\">  <button onclick=\"editarProfessor('" + professor.trim() + "')\"> editar  </button>   <button onclick=\"visualizarProfessor('" + professor.trim() + "')\"> visualizar  </button>  <button onclick=\"removerProfessor('" + professor.trim() + "')\"> remover  </button> " + professor + "</td><td>" + converter(total) + "</td>";
                qtde = 0;
                for (let index = 0; index < vetDisciplina.length; index++) {
                    if (vetDisciplina[index] != undefined && document.getElementById(index) != undefined) {
                        if (document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() == professor) {
                            qtde++;
                        }
                    }
                }
                html += "<td>" + qtde + "</td>";
                html += "</tr>";
            }
            html += "</table><button onclick='exportar()'> Exportar CSV </button>";
            // html += "</table><button onclick='salvar()'> Salvar (localStorage) </button>";
            // html += "</table><button onclick='restaurar()'> Restaurar (localStorage) </button>";
            // html += "</table><button onclick='apagar()'> Apagar (localStorage) </button>";
            document.getElementById("tabela").innerHTML = html;
            salvar();
        }

        function computa() {
            cargaHorariaPorProfessorAux = [];
            for (var professor in cargaHorariaPorProfessor) {
                cargaHorariaPorProfessorAux[professor] = 0;
            }
            cargaHorariaPorProfessor = [];
            cargaHorariaPorProfessor = cargaHorariaPorProfessorAux;

            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined && document.getElementById(index) != undefined) {
                    if (document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() != "") {
                        cargaHorariaPorProfessor[document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim()] +=
                            vetDisciplina[index].creditos * vetDisciplina[index].duracaoPorCredito;
                    }
                    vetDisciplina[index].professor = document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim();
                }
            }
            atualizarCargaPorProfessor();
        }

        function naoExisteDisciplinaAdicionar(novo_nome) {
            if (novo_nome != "") {
                for (let index = 0; index < vetDisciplina.length; index++) {
                    if (vetDisciplina[index] != undefined) {
                        if (vetDisciplina[index].nome == novo_nome) {
                            return false;
                        }
                    }
                }
                return true;
            }
            return false;

        }

        function naoExisteDisciplinaEditar(novo_nome, posicao) {
            if (novo_nome != "") {
                for (let index = 0; index < vetDisciplina.length; index++) {
                    if (vetDisciplina[index] != undefined && posicao != index) {
                        if (vetDisciplina[index].nome == novo_nome) {
                            return false;
                        }
                    }
                }
                return true;
            }
            return false;
        }

        function visualizarDisciplina(nome, index) {
            var conteudo = vetDisciplina[index].nome + "\n* Quantidade de créditos:" + vetDisciplina[index].creditos + "\n" + "* Tempo por cada crédito:" + vetDisciplina[index].duracaoPorCredito + " minutos\n* Professor:" + vetDisciplina[index].professor;
            alert(conteudo);
        }

        function naoExisteProfessorEditar(nome, novo_nome) {
            // if (novo_nome != "") {
            for (var professor in cargaHorariaPorProfessor) {
                if (professor == novo_nome && nome != novo_nome) {
                    return false;
                }
            }
            // }    
            return true;
        }

        function editarProfessor(nome) {
            var novo_nome = prompt("Novo nome:", nome);
            if (novo_nome != nome) {
                if (novo_nome != null && novo_nome != undefined && novo_nome != "" && naoExisteProfessorEditar(nome, novo_nome)) {

                    for (let index = 0; index < vetDisciplina.length; index++) {
                        if (vetDisciplina[index] != undefined && vetDisciplina[index].professor != undefined && vetDisciplina[index].professor == nome) {
                            vetDisciplina[index].professor = novo_nome;
                        }
                    }
                    cargaHorariaPorProfessor[novo_nome] = cargaHorariaPorProfessor[nome];

                    for (let index = 0; index < vetDisciplina.length; index++) {
                        if (vetDisciplina[index] != undefined) {
                            for (let i = 0; i < document.getElementById(index).options.length; i++) {
                                if (document.getElementById(index).options[i].value == nome) {
                                    document.getElementById(index).options[i].value = novo_nome;
                                    document.getElementById(index).options[i].text = novo_nome;
                                }
                            }
                        }
                    }

                    removerProfessor(nome);

                } else {
                    alert("Nome deve ser único e não deve ser vazio!");
                }

            } else {
                alert("Nome deve ser único e não deve ser vazio!");
            }
        }

        function editarDisciplina(nome, index) {
            var novo_nome = prompt("Novo nome:", vetDisciplina[index].nome);
            if (novo_nome === null || novo_nome == "null") return false;

            var creditos = parseInt(prompt("Quantidade de creditos:", vetDisciplina[index].creditos));
            if (creditos === null || creditos == "null") return false;

            var duracaoPorCredito = parseInt(prompt("Tempo (em minutos) por cada créditos:", vetDisciplina[index].duracaoPorCredito));
            if (duracaoPorCredito === null || duracaoPorCredito == "null") return false;

            if (novo_nome != "" && creditos > 0 && duracaoPorCredito > 0 && naoExisteDisciplinaEditar(novo_nome, index)) {
                var professorDaDisciplina = ((document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() != '') ? document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() : "PENDENTE");
                if (professorDaDisciplina !== 'PENDENTE') {
                    // remover a carga antiga
                    cargaHorariaPorProfessor[professorDaDisciplina] -= vetDisciplina[index].creditos * vetDisciplina[index].duracaoPorCredito;
                    // coloca a carga nova
                    cargaHorariaPorProfessor[professorDaDisciplina] += vetDisciplina[index].creditos * vetDisciplina[index].duracaoPorCredito;
                }
                vetDisciplina[index].nome = novo_nome;
                vetDisciplina[index].creditos = creditos;
                vetDisciplina[index].duracaoPorCredito = duracaoPorCredito;
                vetDisciplina[index].professor = professorDaDisciplina;
                computa();
                return true;
            } else {
                alert("O nome deve ser único com créditos e duração > 0");
            }
            return false;
        }

        function adicionarNovaDisciplina() {
            var novo_nome = document.getElementById('novo_nome').value;
            var creditos = parseInt(document.getElementById('novo_creditos').value);
            var duracao = parseInt(document.getElementById('novo_duracao').value);

            if (novo_nome != "" && creditos > 0 && duracao > 0 && naoExisteDisciplinaAdicionar(novo_nome)) {

                let disciplina = {
                    "nome": novo_nome,
                    "creditos": creditos,
                    "duracaoPorCredito": duracao,
                    "professor": "PENDENTE"
                }
                disciplina.nome = ((duracao != 50) ? disciplina.nome + "*" : disciplina.nome);

                vetDisciplina.push(disciplina);
                localStorage.setItem("vetDisciplina", JSON.stringify(vetDisciplina));

                var table = document.getElementById('delegacao');
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                row.id = "linha_" + parseInt(vetDisciplina.length - 1);
                // var row = table.insertRow(0);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                cell1.innerHTML = "<button onclick=\"removerDisciplina('" + disciplina.nome + "'," + parseInt(vetDisciplina.length - 1) + ")\"> excluir </button> <button onclick=\"editarDisciplina('" + disciplina.nome + "'," + parseInt(vetDisciplina.length - 1) + ")\"> editar </button> <button onclick=\"visualizarDisciplina('" + disciplina.nome + "'," + parseInt(vetDisciplina.length - 1) + ")\"> visualizar </button> " + disciplina.nome;
                var html_professor = "<select id='" + parseInt(vetDisciplina.length - 1) + "' onchange='computa()'> ";
                html_professor += "<option value=''> </option>";
                for (var professor in cargaHorariaPorProfessor) {
                    html_professor += "<option value='" + professor + "'>" + professor + "</option>";
                }
                html_professor += "</select>";
                cell2.innerHTML = html_professor;
                document.getElementById('novo_nome').value = "";
                document.getElementById('novo_creditos').value = "";
                document.getElementById('novo_duracao').value = 50;

            } else {
                alert("O nome deve ser único com créditos e duração > 0");
            }
        }

        function deleteRow(id) {
            var row = document.getElementById(id);
            if (row) {
                row.remove();
            }
            /*else {
                alert("Please Enter Correct Row Id!");
            }*/
        }

        function removerProfessor(nome) {
            // for (let index = 0; index < vetDisciplina.length; index++) {
            //     if (vetDisciplina[index] != undefined) {

            //         if (document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() == nome.trim()) {
            //             document.getElementById(index).value = '';
            //         }

            //     }
            // }
            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined) {
                    for (let i = 0; i < document.getElementById(index).options.length; i++) {
                        if (document.getElementById(index).options[i].value == nome) {
                            document.getElementById(index).remove(i);
                            // document.getElementById(index).options[i].value =  novo_nome;
                            // document.getElementById(index).options[i].text = novo_nome;
                        }
                    }
                }
            }
            // deleteRow("linha_"+nome); 
            delete cargaHorariaPorProfessor[nome];
            computa();
        }

        function removerDisciplina(nome, index) {
            var resposta = confirm("Você tem certeza?");
            if (resposta == true) {
                var professorDaDisciplina = ((document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() != '') ? document.getElementById(index).options[document.getElementById(index).selectedIndex].value.trim() : "PENDENTE");
                if (professorDaDisciplina !== 'PENDENTE') {
                    cargaHorariaPorProfessor[professorDaDisciplina] -= vetDisciplina[index].creditos * vetDisciplina[index].duracaoPorCredito;
                }
                // var table = document.getElementById('delegacao');
                // var row = table.deleteRow(index);
                // var row = document.getElementById("linha_"+index);
                // row.parentNode.removeChild(row);
                deleteRow("linha_" + index);
                vetDisciplina[index] = undefined;
                computa();
                // atualizarCargaPorProfessor();
                // salvar();
            }
        }

        function importar(){
            var array = document.getElementById("conteudo").value.split("\n");            
            var i = 0;
            if (array.length > 0){
                aux = array[1].split(";");
                i = 0;
                while(aux[0]!='professor' && aux[1]!='carga' && aux[2]!='turmas'){
                    let disciplina = {
                        "nome": aux[0].trim(),
                        "creditos": parseInt(aux[1]),
                        "duracaoPorCredito": parseInt(aux[2]),
                        "professor": aux[3].trim()
                    }
                    vetDisciplina.push(disciplina);
                    i++;
                }
                i++;              
                for (let index = i; index < array.length - 1; index++) {
                    aux = array[i].split(";");             
                    cargaHorariaPorProfessor[aux[0]] = parseInt(aux[1].split(":")[0])*60 + parseInt(aux[1].split(":")[1]);
                    html_professor1 += "<option value='" + aux[0] + "'>" + aux[0] + "</option>";
                }
            }
            var html_professor1 = "<option value=''> </option>";        
            var html = "<h2> Nova Disciplina </h2> Nome:<input type='text' id='novo_nome'><br>Quantidade de Créditos:<input type='number' id='novo_creditos' min='0' max='10'><br>Tempo (em minutos) por cada crédito:<input type='number' id='novo_duracao' value='50'><br><button onclick='adicionarNovaDisciplina()'>Adicionar</button><br><br>";
            html += "<table id='delegacao' border='1'>";
            var html_professor2 = "";
            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined) {
                    html_professor2 = "<select id='" + index + "' onchange='computa()'>" + html_professor1 + "</select>";
                    html += "<tr id=\"linha_" + index + "\"> <td> <button onclick=\"removerDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> excluir </button> <button onclick=\"editarDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> editar  </button> <button onclick=\"visualizarDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> visualizar  </button>" + vetDisciplina[index].nome + "</td><td>" + html_professor2 + "</td></tr>";
                    html_professor2 = "";
                }
            }
            html += "</table>";
            document.getElementById("sistema").innerHTML = html;
            document.getElementById("formato_professor").style = "display: none;";
            document.getElementById("formato_disciplina").style = "display: none;";
            document.getElementById("vetProfessor").style = "display: none;";
            document.getElementById("vetDisciplina").style = "display: none;";
            document.getElementById("btn_carregar").style = "display: none;";
            document.getElementById("btn_apagar").style = "display: none;";
            document.getElementById("btn_restaurar").style = "display: none;";
            return false;
        }
        

        function carregar() {
            if (localStorage.getItem("cargaHorariaPorProfessor") != undefined && localStorage.getItem("vetDisciplina") != undefined) {
                var resposta = confirm("Há uma distribuição salva.Deseja restaurá-la?\n(ok=Sim, Cancelar=Não)");
                if (resposta) {
                    restaurar();
                    return false;
                } else {
                    apagar();
                }
            }
            var html_professor1 = "<option value=''> </option>";
            var array = document.getElementById("vetProfessor").value.split("\n");
            for (let index = 0; index < array.length - 1; index++) {
                cargaHorariaPorProfessor[array[index]] = 0;
                html_professor1 += "<option value='" + array[index] + "'>" + array[index] + "</option>";
            }
            var array = document.getElementById("vetDisciplina").value.split("\n");
            for (let index = 0; index < array.length - 1; index++) {
                // tratar problemas de linha mal formatada => pendente
                var aux = array[index].split(SEPARADOR);
                let disciplina = {
                    "nome": aux[0].trim(),
                    "creditos": parseInt(aux[1]),
                    "duracaoPorCredito": parseInt(aux[2])
                }
                vetDisciplina.push(disciplina);
            }
            var html = "<h2> Nova Disciplina </h2> Nome:<input type='text' id='novo_nome'><br>Quantidade de Créditos:<input type='number' id='novo_creditos' min='0' max='10'><br>Tempo (em minutos) por cada crédito:<input type='number' id='novo_duracao' value='50'><br><button onclick='adicionarNovaDisciplina()'>Adicionar</button><br><br>";
            html += "<table id='delegacao' border='1'>";
            var html_professor2 = "";
            for (let index = 0; index < vetDisciplina.length; index++) {
                if (vetDisciplina[index] != undefined) {
                    html_professor2 = "<select id='" + index + "' onchange='computa()'>" + html_professor1 + "</select>";
                    html += "<tr id=\"linha_" + index + "\"> <td> <button onclick=\"removerDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> excluir </button> <button onclick=\"editarDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> editar  </button> <button onclick=\"visualizarDisciplina('" + vetDisciplina[index].nome.trim() + "'," + index + ")\"> visualizar  </button>" + vetDisciplina[index].nome + "</td><td>" + html_professor2 + "</td></tr>";
                    html_professor2 = "";
                }
            }
            html += "</table>";
            document.getElementById("sistema").innerHTML = html;
            document.getElementById("formato_professor").style = "display: none;";
            document.getElementById("formato_disciplina").style = "display: none;";
            document.getElementById("vetProfessor").style = "display: none;";
            document.getElementById("vetDisciplina").style = "display: none;";
            document.getElementById("btn_carregar").style = "display: none;";
            document.getElementById("btn_apagar").style = "display: none;";
            document.getElementById("btn_restaurar").style = "display: none;";
            return true;
        }
    </script>
</head>

<body>
    <h1>Distribuição de Disciplinas</h1>
    <h2 id="formato_disciplina">Formato Disciplina: nome,créditos,duração por crédito (em minutos)<br></h2>
    <h2 id="formato_professor">Formato Professor: Usar nomes únicos<br></h2>
    <button id="btn_restaurar" onclick="restaurar()">Restaurar Histórico</button>
    <button id="btn_apagar" onclick="apagar()">Apagar Histórico</button>
    <button id="btn_carregar" onclick="carregar()">Carregar (Professores e Disciplinas)</button>
    <table>
        <tr>
            <td>
                <!-- <h2 id="label_professores">Professores:</h2> -->
                <textarea id="vetProfessor" rows="50" cols="15">
betito
bolivar
cibele
cleber
cleiton
crisiane
denise
eduardo
flavia
fritzen
igor
javier
lucia
luciano
luis
mairon
marcia
marcio
raquel
telecken
OUTROS
                </textarea>
            </td>
            <td>
                <!-- <h2 id="label_disciplinas>Disciplinas:</h2> -->
                <textarea id="vetDisciplina" rows="50" cols="55">
Fundamentos da Computação,4,50
Fundamentos da Interação Humano computador,2,50
Lógica de Programação,6,50
Matemática Básica,2,50
Sistemas de Informação (Turma 1),4,50
Sistemas de Informação (Turma 2),4,50
Tópicos em Tecnologia e Sociedade (Turma 1),2,50
Tópicos em Tecnologia e Sociedade (Turma 2),2,50
Design de Interfaces,4,50
Engenharia de Software,4,50
Fundamentos de Matemática Discreta,4,50
Organização de Computadores,2,50
Programação Modular,4,50
Projeto e Modelagem de Banco de Dados,2,50
Análise e Projeto de Software,4,50
Design de Interação,4,50
Fundamentos de Estatística Exploratória,2,50
Implementação e Operação de Bancos de Dados,4,50
Programação Orientada a Objetos,4,50
Sistemas Operacionais,2,50
Desenvolvimento de Aplicativos Web I,4,50
Estruturas de Dados ,4,50
Fundamentos de Inferência Estatística,2,50
Gerencia de Projetos,4,50
Princípios e Padrões de Projeto,4,50
Programação em Bancos de Dados,2,50
Desenvolvimento de Aplicativos Web II,4,50
Empreendimentos Empresariais,4,50
Metodologia Científica,2,50
Princípios e Padrões de Arquitetura,4,50
Qualidade de Software,2,50
Redes de Computadores,4,50
Seminários (Trabalho de Conclusão de Curso),10,50
Tópicos em Ciência da Computação,2,50
Tópicos em Desenvolvimento de Sistemas,2,50
Tópicos em Desenvolvimento de Aplicativos,2,50
Tópicos em Análise de Sistemas,2,50
Tópicos em Bancos de Dados,2,50
Componente Curricular Optativo (Inglês),2,50
Componente Curricular Optativo (Libras),2,50
Lógica de Programação (Turma 1),5,50
Lógica de Programação (Turma 2),5,50
Fundamentos da Computação (Turma 1),2,50
Fundamentos da Computação (Turma 2),2,50
Programação WEB e Front End,5,50
Bancos de Dados (2º ano),3,50
Bancos de Dados (3º ano)*,4,60
Engenharia de Software*,3,60
Desenvolvimento de Sistemas I*,4,60
Desenvolvimento de Sistemas II*,4,60
                </textarea>
            </td>
            <td id="sistema">

            </td>
            <td style="width: 20px;"></td>
            <td id="tabela">

            </td>
        </tr>
        <!-- <tr>
            <td> -->
        <!-- <button id="btn_carregar" onclick="carregar()">Carregar (Professores e Disciplinas)</button> -->
        <!-- </td>
        </tr> -->
    </table>
    <!-- <button id="btn_restaurar" onclick="restaurar()">Restaurar Histórico</button>
    <button id="btn_apagar" onclick="apagar()">Apagar Histórico</button>
    <button id="btn_carregar" onclick="carregar()">Carregar (Professores e Disciplinas)</button> -->
</body>

</html>